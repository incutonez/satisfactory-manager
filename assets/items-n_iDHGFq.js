import{r as n,$ as g,j as c,u as Q,a as De,i as Ie,b as Te,c as Z,g as Ne,d as Ae,R as G,e as Re,l as Be,f as Ve,O as _e,s as He,h as ze,k as Ue,m as qe}from"./index-C79zgZY1.js";import{c as Oe,u as Ze,g as Ge,a as Le,b as We,S as Je,d as Qe,e as Xe,T as Ye}from"./TableData-DBC-qjpO.js";import{$ as V,a as X,b as et,c as L,d as tt,e as de,f as re,g as ot,h as at,i as st,j as nt,k as _,l as ue,m as lt,n as fe,o as Y,p as it,q as rt,r as ct,B as I,s as dt,t as ut,u as pe,S as be}from"./BaseDialog-bupQKi7F.js";import{$ as ft,a as pt,b as bt,c as ht,d as $t,e as he,f as mt,g as $e,h as xt,i as gt,j as yt,k as vt,l as St,m as Ct,n as Pt,o as Ft,p as wt,q as ce,r as me,s as kt,t as Mt,u as Kt,v as Et,w as jt,B as Dt,F as ee,x as It,I as Tt,C as Nt}from"./FieldDisplay-B78GTFd4.js";const At="1.1.0",xe=new WeakMap;function Rt(e,t,o){let{shouldFocusWrap:a=!0,onKeyDown:s,onKeyUp:r,...d}=e;!e["aria-label"]&&e["aria-labelledby"];let l=V(e,{labelable:!0}),{listProps:i}=ft({...d,ref:o,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:a,linkBehavior:"override"});return xe.set(t,{onClose:e.onClose,onAction:e.onAction,shouldUseVirtualFocus:e.shouldUseVirtualFocus}),{menuProps:X(l,{onKeyDown:s,onKeyUp:r},{role:"menu",...i,onKeyDown:u=>{var f;(u.key!=="Escape"||e.shouldUseVirtualFocus)&&((f=i.onKeyDown)===null||f===void 0||f.call(i,u))}})}}function Bt(e,t,o){let{id:a,key:s,closeOnSelect:r,isVirtualized:d,"aria-haspopup":l,onPressStart:i,onPressUp:u,onPress:f,onPressChange:$,onPressEnd:v,onHoverStart:h,onHoverChange:C,onHoverEnd:P,onKeyDown:S,onKeyUp:M,onFocus:H,onFocusChange:z,onBlur:T,selectionManager:x=t.selectionManager}=e,y=!!l,K=y&&e["aria-expanded"]==="true";var E;let F=(E=e.isDisabled)!==null&&E!==void 0?E:x.isDisabled(s);var j;let N=(j=e.isSelected)!==null&&j!==void 0?j:x.isSelected(s),w=xe.get(t),m=t.collection.getItem(s),b=e.onClose||w.onClose,ve=et(),U=p=>{var O;if(!y){if(!(m==null||(O=m.props)===null||O===void 0)&&O.onAction?m.props.onAction():e.onAction&&e.onAction(s),w.onAction){let je=w.onAction;je(s)}p.target instanceof HTMLAnchorElement&&m&&ve.open(p.target,p,m.props.href,m.props.routerOptions)}},q="menuitem";y||(x.selectionMode==="single"?q="menuitemradio":x.selectionMode==="multiple"&&(q="menuitemcheckbox"));let oe=L(),ae=L(),se=L(),A={id:a,"aria-disabled":F||void 0,role:q,"aria-label":e["aria-label"],"aria-labelledby":oe,"aria-describedby":[ae,se].filter(Boolean).join(" ")||void 0,"aria-controls":e["aria-controls"],"aria-haspopup":l,"aria-expanded":e["aria-expanded"]};x.selectionMode!=="none"&&!y&&(A["aria-checked"]=N),d&&(A["aria-posinset"]=m==null?void 0:m.index,A["aria-setsize"]=pt(t.collection));let Se=p=>{p.pointerType==="keyboard"&&U(p),i==null||i(p)},ne=()=>{!y&&b&&(r??(x.selectionMode!=="multiple"||x.isLink(s)))&&b()},Ce=p=>{p.pointerType==="mouse"&&(U(p),ne()),u==null||u(p)},Pe=p=>{p.pointerType!=="keyboard"&&p.pointerType!=="mouse"&&(U(p),ne()),f==null||f(p)},{itemProps:k,isFocused:le}=bt({id:a,selectionManager:x,key:s,ref:o,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none",shouldUseVirtualFocus:w.shouldUseVirtualFocus}),{pressProps:Fe,isPressed:we}=tt({onPressStart:Se,onPress:Pe,onPressUp:Ce,onPressChange:$,onPressEnd:v,isDisabled:F}),{hoverProps:ke}=de({isDisabled:F,onHoverStart(p){!re()&&!(K&&l)&&(x.setFocused(!0),x.setFocusedKey(s)),h==null||h(p)},onHoverChange:C,onHoverEnd:P}),{keyboardProps:Me}=ot({onKeyDown:p=>{if(p.repeat){p.continuePropagation();return}switch(p.key){case" ":!F&&x.selectionMode==="none"&&!y&&r!==!1&&b&&b();break;case"Enter":!F&&r!==!1&&!y&&b&&b();break;default:y||p.continuePropagation(),S==null||S(p);break}},onKeyUp:M}),{focusProps:Ke}=at({onBlur:T,onFocus:H,onFocusChange:z}),ie=V(m==null?void 0:m.props);delete ie.id;let Ee=st(m==null?void 0:m.props);return{menuItemProps:{...A,...X(ie,Ee,y?{onFocus:k.onFocus,"data-collection":k["data-collection"],"data-key":k["data-key"]}:k,Fe,ke,Me,Ke,w.shouldUseVirtualFocus||y?{onMouseDown:p=>p.preventDefault()}:void 0),tabIndex:k.tabIndex!=null&&K&&!w.shouldUseVirtualFocus?-1:k.tabIndex},labelProps:{id:oe},descriptionProps:{id:ae},keyboardShortcutProps:{id:se},isFocused:le,isFocusVisible:le&&x.isFocused&&re()&&!K,isSelected:N,isPressed:we,isDisabled:F}}function Vt(e){let{heading:t,"aria-label":o}=e,a=nt();return{itemProps:{role:"presentation"},headingProps:t?{id:a,role:"presentation"}:{},groupProps:{role:"group","aria-label":o,"aria-labelledby":t?a:void 0}}}function ge(e){let t=ht(e),[o,a]=n.useState(null),[s,r]=n.useState([]),d=()=>{r([]),t.close()};return{focusStrategy:o,...t,open(u=null){a(u),t.open()},toggle(u=null){a(u),t.toggle()},close(){d()},expandedKeysStack:s,openSubmenu:(u,f)=>{r($=>f>$.length?$:[...$.slice(0,f),u])},closeSubmenu:(u,f)=>{r($=>$[f]===u?$.slice(0,f):$)}}}class _t{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let o=this.keyMap.get(t);var a;return o&&(a=o.prevKey)!==null&&a!==void 0?a:null}getKeyAfter(t){let o=this.keyMap.get(t);var a;return o&&(a=o.nextKey)!==null&&a!==void 0?a:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){var o;return(o=this.keyMap.get(t))!==null&&o!==void 0?o:null}at(t){const o=[...this.getKeys()];return this.getItem(o[t])}constructor(t,{expandedKeys:o}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=t,o=o||new Set;let a=l=>{if(this.keyMap.set(l.key,l),l.childNodes&&(l.type==="section"||o.has(l.key)))for(let i of l.childNodes)a(i)};for(let l of t)a(l);let s=null,r=0;for(let[l,i]of this.keyMap)s?(s.nextKey=l,i.prevKey=s.key):(this.firstKey=l,i.prevKey=void 0),i.type==="item"&&(i.index=r++),s=i,s.nextKey=void 0;var d;this.lastKey=(d=s==null?void 0:s.key)!==null&&d!==void 0?d:null}}function Ht(e){let{onExpandedChange:t}=e,[o,a]=$t(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),s=he(e),r=n.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),d=mt(e,n.useCallback(i=>new _t(i,{expandedKeys:o}),[o]),null);return n.useEffect(()=>{s.focusedKey!=null&&!d.getItem(s.focusedKey)&&s.setFocusedKey(null)},[d,s.focusedKey]),{collection:d,expandedKeys:o,disabledKeys:r,toggleKey:i=>{a(zt(o,i))},setExpandedKeys:a,selectionManager:new $e(d,s)}}function zt(e,t){let o=new Set(e);return o.has(t)?o.delete(t):o.add(t),o}const Ut=n.createContext({}),ye=n.createContext(null),te=n.createContext(null),W=n.createContext(null),B=n.createContext(null);function qt(e){let t=ge(e),o=n.useRef(null),{menuTriggerProps:a,menuProps:s}=gt({...e,type:"menu"},t,o),[r,d]=n.useState(null),l=n.useCallback(()=>{o.current&&d(o.current.offsetWidth+"px")},[o]);yt({ref:o,onResize:l});let i=n.useRef(null);return g.createElement(_,{values:[[ye,{...s,ref:i}],[vt,t],[W,t],[St,{trigger:"MenuTrigger",triggerRef:o,scrollRef:i,placement:"bottom start",style:{"--trigger-width":r},"aria-labelledby":s["aria-labelledby"]}]]},g.createElement(Ct,{...a,ref:o,isPressed:t.isOpen},e.children))}const Ot=n.createContext(null),Zt=n.forwardRef(function(t,o){return[t,o]=ue(t,o,ye),g.createElement(Ft,{content:g.createElement(wt,t)},a=>g.createElement(Gt,{props:t,collection:a,menuRef:o}))});function Gt({props:e,collection:t,menuRef:o}){let{filter:a,collectionProps:s,collectionRef:r}=n.useContext(ce)||{};o=fe(n.useMemo(()=>rt(o,r!==void 0?r:null),[r,o]));let d=n.useMemo(()=>a?t.UNSTABLE_filter(a):t,[t,a]),l=Ht({...e,collection:d,children:void 0}),i=n.useContext(W),{isVirtualized:u,CollectionRoot:f}=n.useContext(me),{menuProps:$}=Rt({...e,...s,isVirtualized:u,onClose:e.onClose||(i==null?void 0:i.close)},l,o),v=Y({defaultClassName:"react-aria-Menu",className:e.className,style:e.style,values:{isEmpty:l.collection.size===0}}),h=null;return l.collection.size===0&&e.renderEmptyState&&(h=g.createElement("div",{role:"menuitem",style:{display:"contents"}},e.renderEmptyState())),g.createElement(kt,null,g.createElement("div",{...V(e),...$,...v,ref:o,slot:e.slot||void 0,"data-empty":l.collection.size===0||void 0,onScroll:e.onScroll},g.createElement(_,{values:[[te,l],[Mt,{elementType:"div"}],[Kt,{name:"MenuSection",render:Wt}],[Ot,{parentMenuRef:o,shouldUseVirtualFocus:s==null?void 0:s.shouldUseVirtualFocus}],[J,null],[ce,null],[B,l.selectionManager],[W,i??ge({})]]},g.createElement(f,{collection:l.collection,persistedKeys:Et(l.selectionManager.focusedKey),scrollRef:o})),h))}class Lt extends $e{get focusedKey(){return this.parent.focusedKey}get isFocused(){return this.parent.isFocused}setFocusedKey(t,o){return this.parent.setFocusedKey(t,o)}setFocused(t){this.parent.setFocused(t)}get childFocusStrategy(){return this.parent.childFocusStrategy}constructor(t,o){super(t.collection,o),this.parent=t}}function Wt(e,t,o,a="react-aria-MenuSection"){var s,r;let d=n.useContext(te),{CollectionBranch:l}=n.useContext(me),[i,u]=ct();var f;let{headingProps:$,groupProps:v}=Vt({heading:u,"aria-label":(f=o.props["aria-label"])!==null&&f!==void 0?f:void 0}),h=Y({defaultClassName:a,className:(s=o.props)===null||s===void 0?void 0:s.className,style:(r=o.props)===null||r===void 0?void 0:r.style,values:{}}),C=n.useContext(B),P=he(e),S=e.selectionMode!=null?new Lt(C,P):C;return g.createElement("section",{...V(e),...v,...h,ref:t},g.createElement(_,{values:[[jt,{...$,ref:i}],[B,S]]},g.createElement(l,{collection:d.collection,parent:o})))}const J=n.createContext(null),Jt=xt("item",function(t,o,a){var s;[t,o]=ue(t,o,J);let r=(s=lt(J))===null||s===void 0?void 0:s.id,d=n.useContext(te),l=fe(o),i=n.useContext(B),{menuItemProps:u,labelProps:f,descriptionProps:$,keyboardShortcutProps:v,...h}=Bt({...t,id:r,key:a.key,selectionManager:i},d,l),{hoverProps:C,isHovered:P}=de({isDisabled:h.isDisabled}),S=Y({...t,id:void 0,children:a.rendered,defaultClassName:"react-aria-MenuItem",values:{...h,isHovered:P,isFocusVisible:h.isFocusVisible,selectionMode:i.selectionMode,selectionBehavior:i.selectionBehavior,hasSubmenu:!!t["aria-haspopup"],isOpen:t["aria-expanded"]==="true"}}),M=t.href?"a":"div";return g.createElement(M,{...X(u,C),...S,ref:l,"data-disabled":h.isDisabled||void 0,"data-hovered":P||void 0,"data-focused":h.isFocused||void 0,"data-focus-visible":h.isFocusVisible||void 0,"data-pressed":h.isPressed||void 0,"data-selected":h.isSelected||void 0,"data-selection-mode":i.selectionMode==="none"?void 0:i.selectionMode,"data-has-submenu":!!t["aria-haspopup"]||void 0,"data-open":t["aria-expanded"]==="true"||void 0},g.createElement(_,{values:[[Pt,{slots:{[it]:f,label:f,description:$}}],[Ut,v]]},S.children))}),Qt=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 -960 960 960",...e},n.createElement("path",{d:"M480-80q-75 0-140.5-28T225-185q-49-49-77-114.5T120-440h60q0 125 87.5 212.5T480-140q125 0 212.5-87.5T780-440q0-125-85-212.5T485-740h-23l73 73-41 42-147-147 147-147 41 41-78 78h23q75 0 140.5 28T735-695q49 49 77 114.5T840-440q0 75-28 140.5T735-185q-49 49-114.5 77T480-80Z"})),Xt=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 -960 960 960",...e},n.createElement("path",{d:"M120-240v-60h720v60H120Zm0-210v-60h720v60H120Zm0-210v-60h720v60H120Z"})),Yt=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 -960 960 960",...e},n.createElement("path",{d:"M480-313 287-506l43-43 120 120v-371h60v371l120-120 43 43-193 193ZM220-160q-24 0-42-18t-18-42v-143h60v143h520v-143h60v143q0 24-18 42t-42 18H220Z"})),eo=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 -960 960 960",...e},n.createElement("path",{d:"M452-202h60v-201l82 82 42-42-156-152-154 154 42 42 84-84v201ZM220-80q-24 0-42-18t-18-42v-680q0-24 18-42t42-18h361l219 219v521q0 24-18 42t-42 18H220Zm331-554v-186H220v680h520v-494H551ZM220-820v186-186 680-680Z"}));function to({...e}){return c.jsx(Zt,{...e})}function oo({children:e,...t}){return c.jsxs(qt,{...t,children:[c.jsx(I,{"aria-label":"Menu",className:"cursor-pointer",icon:Xt}),c.jsx(Dt,{children:c.jsx(to,{className:"text-sm",children:e})})]})}function D({icon:e,iconSlot:t,iconCls:o,children:a,text:s,cls:r,...d}){let l;return r=dt("p-2 hover:bg-sky-200 flex items-center space-x-1",d.isDisabled?"opacity-60 cursor-not-allowed pointer-events-none":"cursor-pointer"),s&&(a=c.jsx("span",{children:s})),t?l=t:e&&(l=c.jsx(ut,{as:e,className:o,size:"size-4.5"})),c.jsxs(Jt,{className:r,...d,children:[l,a]})}function ao({isEdit:e,factoryName:t="",setShow:o,...a}){const s=Q(),[r,d]=n.useState(t),l=c.jsx(I,{text:"Save",icon:be,isDisabled:!r,onClick:f});n.useEffect(()=>{a.show?d(t):d("")},[a.show,t]);function i(){r&&(s(De(r,e)),o(!1))}function u(){i()}function f(){i()}return c.jsx(pe,{...a,setShow:o,title:e?"Edit Factory":"Add Factory",size:"size-fit",bodyCls:"p-4",footerSlot:l,children:c.jsx("article",{children:c.jsx(ee,{label:"Name",autoFocus:!0,value:r,setter:d,onEnter:u})})})}function so({...e}){const t=Q(),[o,a]=n.useState(),s=n.useRef(null),r=c.jsx(I,{icon:be,text:"Save",onClick:d});function d(){if(o){const u=new FileReader;u.onload=({target:f})=>{f&&(t(Ie(JSON.parse(f.result))),e.setShow(!1))},u.readAsText(o)}}function l({target:u}){var f;a((f=u.files)==null?void 0:f[0])}function i(){var u;(u=s.current)==null||u.click()}return c.jsxs(pe,{size:"w-64",title:"Import Data",footerSlot:r,bodyCls:"space-y-2",...e,children:[c.jsxs(I,{className:"relative",onClick:i,children:[c.jsx(ee,{ref:s,hidden:!0,setter:a,type:"file",className:"size-full absolute",onChange:l}),c.jsx("span",{children:"Select File..."})]}),c.jsx(It,{value:o==null?void 0:o.name,label:"Selected"})]})}const R=Oe();function no(){const e=Q(),t=Te(),o=Z(Ne),a=Z(Ae),[s,r]=n.useState(""),[d,l]=n.useState(!1),[i,u]=n.useState(!1),[f,$]=n.useState(!1),[v]=n.useState([R.accessor("name",{header:"Name",cell:b=>c.jsx(Tt,{cell:b.cell})}),R.accessor("producingTotal",{header:"Producing",cell:b=>b.getValue(),meta:{cellCls:"text-right",onClickCell(b){t({to:G,params:{itemId:b.row.original.id,recipeType:"produces"}})}}}),R.accessor("consumingTotal",{header:"Consuming",cell:b=>b.getValue(),meta:{cellCls:"text-right",onClickCell(b){t({to:G,params:{itemId:b.row.original.id,recipeType:"consumes"}})}}}),R.accessor("total",{header:"Total",cell:b=>b.getValue(),meta:{cellCls:"text-right",onClickCell(b){t({to:G,params:{itemId:b.row.original.id,recipeType:"both"}})}}})]),[h,C]=n.useState(""),[P,S]=n.useState(),M=Z(Re),[H,z]=n.useState([{id:"name",desc:!1}]),T=Ze({data:M,columns:v,globalFilterFn:"includesString",getCoreRowModel:We(),getFilteredRowModel:Le(),getSortedRowModel:Ge(),onSortingChange:z,onGlobalFilterChange:S,state:{sorting:H,globalFilter:P}}),x=n.useCallback(()=>{a&&e(Be(a))},[e,a]);function y(b){T.setGlobalFilter(b)}function K(){e(Ue())}function E(){e(qe())}function F(){u(!0)}function j(b){e(He(b))}function N(){r(a==null?void 0:a.name),$(!0),l(!0)}function w(){r(""),$(!1),l(!0)}function m(){a&&e(ze(a))}return n.useEffect(()=>{e(Ve())},[e]),n.useEffect(()=>{a&&x()},[a,x]),c.jsxs("article",{className:"size-full flex flex-col space-y-2",children:[c.jsxs("h2",{className:"font-semibold text-xl mb-4",children:[c.jsx("a",{href:"https://store.steampowered.com/app/526870/Satisfactory/",className:"link",target:"_blank",children:"Satisfactory"})," ",c.jsxs("span",{children:["Production Manager",c.jsxs("a",{className:"link ml-1",href:"https://github.com/incutonez/satisfactory-manager/blob/main/CHANGELOG.md",target:"_blank",children:["v",At]})]})]}),c.jsxs("section",{className:"flex",children:[c.jsxs("section",{className:"flex space-x-2",children:[c.jsx(Nt,{label:"Factory",value:(a==null?void 0:a.id)??"",options:o,valueField:"id",displayField:"name",setValue:j}),c.jsxs(oo,{children:[c.jsx(D,{icon:Je,text:"Edit",onAction:N}),c.jsx(D,{text:"Delete",icon:Qe,onAction:m,isDisabled:(o==null?void 0:o.length)<=1}),c.jsx(D,{text:"Clear",icon:Qt,onAction:K}),c.jsx(D,{text:"Download",icon:Yt,onAction:E}),c.jsx(D,{text:"Import",icon:eo,onAction:F})]}),c.jsx(I,{text:"Factory",title:"Add New Factory",icon:Xe,onClick:w})]}),c.jsx("section",{className:"ml-auto flex space-x-2",children:c.jsx(ee,{value:h,setter:C,label:"Search",placeholder:"Search...",onInputChange:y})})]}),c.jsx(Ye,{table:T}),c.jsx(ao,{isEdit:f,factoryName:s,show:d,setShow:l}),c.jsx(so,{show:i,setShow:u}),c.jsx(_e,{})]})}const uo=no;export{uo as component};
